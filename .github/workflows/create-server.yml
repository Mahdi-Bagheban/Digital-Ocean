# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ðŸš€ DigitalOcean Server Automation Workflow
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# ðŸ“ Purpose: Ø§ØªÙˆÙ…Ø§Ø³ÛŒÙˆÙ† Ú©Ø§Ù…Ù„ Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ DigitalOcean
# ðŸŽ¯ Features: KASM Workspace + RustDesk Server + Full Automation
# ðŸ‘¤ Author: Mahdi Bagheban
# ðŸ“… Updated: December 2025
# ðŸ”– Version: 8.0 (Production Ready - MahdiArts Edition)
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

name: ðŸš€ Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø±ÙˆØ± DigitalOcean | Create Server

on:
  workflow_dispatch:
    inputs:
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # ðŸ“ Ø¨Ø®Ø´ Ø§ÙˆÙ„: Ù…Ø´Ø®ØµØ§Øª Ø§ØµÙ„ÛŒ Ø³Ø±ÙˆØ±
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      
      server_name:
        description: 'ðŸ“ Ù†Ø§Ù… Ø³Ø±ÙˆØ± | Server Name'
        required: true
        default: 'MahdiArts'
        type: string
      
      region:
        description: 'ðŸŒ Ù…Ù†Ø·Ù‚Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ | Region'
        required: true
        default: 'fra1'
        type: choice
        options:
          - 'fra1'  # ðŸ‡©ðŸ‡ª Frankfurt, Germany (Low Latency EU/ME)
          - 'ams3'  # ðŸ‡³ðŸ‡± Amsterdam, Netherlands 
          - 'lon1'  # ðŸ‡¬ðŸ‡§ London, UK
          - 'nyc1'  # ðŸ‡ºðŸ‡¸ New York, USA
          - 'sfo3'  # ðŸ‡ºðŸ‡¸ San Francisco, USA
          - 'sgp1'  # ðŸ‡¸ðŸ‡¬ Singapore
      
      size_slug:
        description: 'ðŸ’» Ù¾Ù„Ù† Ø³Ø±ÙˆØ± | Server Plan'
        required: true
        default: 's-4vcpu-8gb-intel'
        type: choice
        options:
          - 's-2vcpu-4gb-intel'      # ðŸ’¼ Ù…Ø¹Ù…ÙˆÙ„ÛŒ: 2 CPU, 4GB RAM, 80GB SSD (~$26/mo)
          - 's-4vcpu-8gb-intel'      # ðŸš€ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯: 4 CPU, 8GB RAM, 160GB SSD (~$52/mo)
          - 'm-2vcpu-16gb-intel'     # ðŸ’ª Ø®ÛŒÙ„ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯: 2 CPU, 16GB RAM, 50GB SSD (~$98/mo)
          - 'm-8vcpu-64gb-intel'     # âš¡ ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡: 8 CPU, 64GB RAM, 200GB SSD (~$435/mo)
          - 'm-32vcpu-256gb-intel'   # ðŸ”¥ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ: 32 CPU, 256GB RAM, 800GB SSD (~$1740/mo)

jobs:
  create-server:
    name: ðŸ—ï¸ Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø±ÙˆØ±
    runs-on: ubuntu-latest
    
    steps:
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # ðŸ“¥ Step 1: Checkout Repository
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v4
      
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # ðŸ”§ Step 2: Ù†ØµØ¨ Dependencies
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: ðŸ”§ Ù†ØµØ¨ Dependencies
        run: |
          sudo apt-get update -qq
          sudo apt-get install -y jq curl bc
          echo "âœ… Dependencies Ù†ØµØ¨ Ø´Ø¯Ù†Ø¯"
      
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # ðŸ” Step 3: Validate API Keys
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: ðŸ” Validate API Keys
        run: |
          if [ -z "${{ secrets.DO_API_TOKEN }}" ]; then
            echo "âŒ Error: DO_API_TOKEN is not set"
            exit 1
          fi
          if [ -z "${{ secrets.SSH_KEY_NAME }}" ]; then
            echo "âŒ Error: SSH_KEY_NAME is not set"
            exit 1
          fi
          echo "âœ… API Keys Ù…Ø¹ØªØ¨Ø± Ù‡Ø³ØªÙ†Ø¯"
      
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # ðŸ“Š Step 4: Display Configuration
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: ðŸ“Š Display Configuration
        run: |
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "ðŸŽ¯ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø³Ø±ÙˆØ± MahdiArts"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "ðŸ“ Ù†Ø§Ù… Ø³Ø±ÙˆØ±: ${{ github.event.inputs.server_name }}"
          echo "ðŸŒ Ù…Ù†Ø·Ù‚Ù‡: ${{ github.event.inputs.region }}"
          echo "ðŸ’» Ù¾Ù„Ù†: ${{ github.event.inputs.size_slug }}"
          echo "ðŸŒ IPv6: ÙØ¹Ø§Ù„ (enabled)"
          echo "ðŸ“Š Monitoring: ÙØ¹Ø§Ù„ (enabled)"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
      
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # ðŸ—ï¸ Step 5: Create Server
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: ðŸ—ï¸ Create Server
        run: |
          echo "ðŸ—ï¸ Ø´Ø±ÙˆØ¹ Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø±ÙˆØ±..."
          bash ./create-server.sh
        env:
          DO_DROPLET_NAME: ${{ github.event.inputs.server_name }}
          DO_REGION: ${{ github.event.inputs.region }}
          DO_SIZE_SLUG: ${{ github.event.inputs.size_slug }}
          DO_ENABLE_IPV6: "true"
          DO_ENABLE_BACKUPS: "false"
          DO_ENABLE_MONITORING: "true"
          DO_TAGS: "mahdiarts,production,automated"
          DO_API_TOKEN: ${{ secrets.DO_API_TOKEN }}
          SSH_KEY_NAME: ${{ secrets.SSH_KEY_NAME }}
      
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # ðŸ“‹ Step 6: Generate Job Summary
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: ðŸ“‹ Generate Job Summary
        if: always()
        run: |
          echo "## ðŸŽ¯ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø³Ø±ÙˆØ±" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ“Œ Ù¾Ø§Ø±Ø§Ù…ØªØ± | ðŸ“ Ù…Ù‚Ø¯Ø§Ø± |" >> $GITHUB_STEP_SUMMARY
          echo "|---|---|" >> $GITHUB_STEP_SUMMARY
          echo "| **ðŸ“ Ù†Ø§Ù… Ø³Ø±ÙˆØ±** | \`${{ github.event.inputs.server_name }}\` |" >> $GITHUB_STEP_SUMMARY
          echo "| **ðŸŒ Ù…Ù†Ø·Ù‚Ù‡** | \`${{ github.event.inputs.region }}\` |" >> $GITHUB_STEP_SUMMARY
          echo "| **ðŸ’» Ù¾Ù„Ù†** | \`${{ github.event.inputs.size_slug }}\` |" >> $GITHUB_STEP_SUMMARY
          echo "| **ðŸŒ IPv6** | ÙØ¹Ø§Ù„ |" >> $GITHUB_STEP_SUMMARY
          echo "| **ðŸ“Š Monitoring** | ÙØ¹Ø§Ù„ |" >> $GITHUB_STEP_SUMMARY
          echo "| **ðŸ·ï¸ Tags** | \`mahdiarts,production,automated\` |" >> $GITHUB_STEP_SUMMARY
